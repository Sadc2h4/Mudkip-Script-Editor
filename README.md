# Mudkip-Script-Editor
![type](https://img.shields.io/badge/app-Windows%20Forms-blue?style=flat-square&logo=windows)
![runtime](https://img.shields.io/badge/.NET-6.0%20(or%208.0)-512BD4?style=flat-square&logo=dotnet)
![tfm](https://img.shields.io/badge/TFM-net6.0--windows-0B7285?style=flat-square)

<img src="/img/Screenshot_0.png" width="720" alt="メイン画面">

## ダウンロード
<a href="https://github.com/Sadc2h4/Mudkip-Script-Editor/releases/tag/v1.3a">
  <img
    src="https://raw.githubusercontent.com/Sadc2h4/brand-assets/main/button/Download_Button_1.png"
    alt="Download .zip"
    height="48"
  />
</a>
<br>
<a href="https://ux.getuploader.com/freehack/download/187">
  <img
    src="https://raw.githubusercontent.com/Sadc2h4/brand-assets/main/button/Download_Button_2.png"
    alt="Download .zip"
    height="48"
  />
</a>


## 概要
本アプリケーションは技情報の編集以外にスクリプトの効果確認，技アニメーションの確認，表示パターンの設定，タイプのチャート編集など，  
技作成の機能に特化した統合ツールとして作成しました．  

ポケモンFR（BPRJ）の技編集ツールとしてはSkillEditor，poke-Syntheなどがありますが，本アプリケーションでは  
技IDごとに情報を個別で取得して編集可能な他，複雑なスクリプトの効果内容やジャンプ先を可視化するなど，バイナリベースでより高度な編集が可能です．  
使いにくい部分もあると思いますが，少なくともバイナリエディタでの直書き込みと比較したら編集が楽な気がします()  

このアプリケーションで実施可能な機能
>・技情報テーブルデータの編集  
・ Romイメージ内の技データをExcelとしてエクスポート  
・技効果スクリプトの内容閲覧，編集  
・技アニメスクリプトの内容閲覧，編集  
・技実行時の言い回しパターン編集  
・タイプ相性チャート閲覧，編集  
・戦闘定型文閲覧  
・Stirlingへの外部参照補助

## 対応拡張子
・.binファイル  
・.gbaファイル  
・.txtファイル  
> [!TIP]
> binファイルを直接読み込むとEffect Info，Animation Infoタブのみ使用可能になります．
> Romイメージに導入前の仮組スクリプトの内容を確認したい際に便利かもしれません

---


## 使い方
### iniファイルの選択について

Romイメージやbinファイルなどの読込の前に，起動直後にiniファイルを選択する必要があります．  
画面上部のini選択プルダウンから対応iniを選択したうえで読込を実施してください．  
Romイメージの読込は[File Open]ダイアログでの選択，もしくは直接ドラッグ&ドロップで可能です．  
<br>
正常に読み込みが完了したらエディタに技内容などが表示されるようになります．  
選択するiniはSettingファイルの中から選ぶことが可能です．  
iniを複製して編集したい場合はSettingファイル内の任意のiniフォルダをコピペし，内部のiniファイルを書き換えてください．  
> [!NOTE]
> binファイルやdatファイルを直接ドラッグ&ドロップした場合，技テキストや情報などはスキップされて直に  
> Effect InfoとAnimation Infoに内容が反映されます．romに紐づく情報の連携や保存は出来ませんが  
> Info Openの機能はそのまま使用可能です．作成したスクリプトデータの内容確認に活用できます．  

### searchボタンについて
技名テキストボックスの右にある[search]ボタンを押すと，読み込んだROMイメージに登録されている全技データを一覧で表示することが出来ます．  
SkillEditorと同じような感覚で技一覧を確認することが可能です．
> [!NOTE]
> 読込データ量が多いため完了までに1~2分ほど時間を要する場合があります.   

### .MSEファイルの出力について
本ツールでは専用のMSE.ファイルの入出力が可能です。
技の編集データをmseファイルとしてエクスポート，またはインポートして反映させることが可能となります．  
画面上部のインポート，エクスポート項目から選択することで実施が可能です．  
技情報，技スクリプト，アニメーションスクリプト，技名，説明文が入出力の対象となります．技データの共有などに役立つ筈です．  
<br><br>

## 各タブについて

<details><summary><h2>Move Data</h2></summary>
技情報テーブル（N × 12byte）からの内容から技効果や威力，特性で使用するフラグなどの情報，  
ステータス画面でのテキストなどを可視化して表示します．技効果IDの2Byte化には対応していないため注意が必要です．  
技情報テーブルの開始位置を移植している場合はiniを編集することで読込可能になります．  
  
> [!TIP]
> 説明文テキストのスクリプト表示文字数に『00』の文字列が足されて超過する場合がありますが  
> 書き込みボタン押下時に自動で最大文字数に調整されるため問題ありません 
  
</details>

<details><summary><h2>Effect Info</h2></summary>
各技で指定されている技効果アドレスから技効果のスクリプトを表示します．   
読込byte数を変更したい場合や，参照先オフセットを変更したい場合は更新ボタン（丸矢印アイコンのボタン）を押すと画面に反映されます．  
上記の操作は画面に反映されているだけのため，Reloadボタンを押すことで元の表示に戻すことも可能です．  
参照先オフセットやスクリプトの変更をロムに反映させたい場合，変更が画面に表示されている状態でWrite to Romボタンを押してください．  

> [!NOTE]
> 終端を感知する符号が存在しないため，最大読込byteを指定する必要があります（デフォルト100byte） 
<br>
スクリプト内容の詳細を見たい場合は[Info Open]ボタンから詳細内容解析画面を開くことが可能です．
また、メモリやジャンプ先オフセットの内容を確認したい場合は[Address]ボタンを押すと一覧で確認できます．  
<br>
チェックボックスの『終了コードを見つけたら読み込み終了』などの機能は[Info Open]で呼び出すサブフォームから有効になります．  
メインフォーム側は最大読込byteの数を表示する仕様のためご注意ください．  
</details>

<details><summary><h2>Animation Info</h2></summary>
概ねEffect Infoタブと同じですが，技アニメの座標のあたりを付けるためのウィンドウがあります．  
技アニメ用ウィンドウは未指定，シングル，ダブルの3パターンから画面を変更可能で，  
クリック位置の座標を取得，ダブルクリック時は中心点を設定し，中心点からの相対座標を表示します．
  
> [!NOTE]
> 読込byte数を変更したい場合や，参照先オフセットを変更したい場合は更新ボタン（丸矢印アイコンのボタン）を押すと画面に反映されます．  
> 上記の操作は画面に反映されているだけのため，Reloadボタンを押すことで元の表示に戻すことも可能です．  
> 参照先オフセットやスクリプトの変更をロムに反映させたい場合，変更が画面に表示されている状態でWrite to Romボタンを押してください．  
</details>

<details><summary><h2>Move Text Pattern</h2></summary>
技表示後の装飾テキストの設定が可能です．  
パターンリストを拡張する場合は必ず指定offsetを更新の上，空き領域を指定して実施してください．  
[Add]ボタンで現在選択中の技を選択パターンで指定した場所に追加できます．  
[Delete]ボタンを押すことで同様に削除が可能です．  
</details>

<details><summary><h2>Battle Text</h2></summary>
戦闘やシステムで表示される定型文の確認が可能です．  
定型文No.を指定することで登録されている定型文の内容を表示することができます． 
画面右の[Text]ボタンを押すことで定型文の全量データを取得することが可能です．  
  
> [!IMPORTANT]
> 本機能は現時点で確認のみに対応しているため，テキストの変更や追加は出来ない点にご注意ください．  
</details>

<details><summary><h2>Type Chart</h2></summary>
技で使用されるタイプテーブルを直接閲覧可能にして表示します．  
[Type Chart]ボタンを押すと一覧表で表示され，対応した記号を入力することでメインフォーム側のスクリプトも更新されます．  
編集が完了したら書き込みボタンから相性テーブルをRomイメージに上書き可能です．  
タイプ相性テーブルを拡張する場合は必ず指定offsetを更新の上，空き領域を指定して実施してください．  
</details>

<details><summary><h2>Log</h2></summary>
編集を実施した際の更新履歴を記載します．  
詳細表示ボタンを押すと編集したスクリプトの詳細が確認可能です．  
</details>

<details><summary><h2>External Tool</h2></summary>
設定する外部ツールのフルパスを指定するタブです．  
設定することで[Effect Info]や[Animation Info]のスクリプト詳細画面の右端から該当オフセットを開くことが可能になります．  
参照先のフルパスを更新するためには[Updata]ボタンを押してください．現状はStirlingのみの対応となっています．  
</details>

---


## 削除方法
・ファイルごと削除してください  

## 配布条件
・本ファイルはフリーです．開発関係者の方々の役に立てれば幸いです．  
・尚，配布により発生した如何なる損害も作者は責任を負いません．  

## 免責
・本ファイルを使用したことにより生じた損害については，一切の責任を負いません．  
